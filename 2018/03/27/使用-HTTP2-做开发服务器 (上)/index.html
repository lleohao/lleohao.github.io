<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">
  <link rel="alternate" href="/atom.xml" title="Lleo" type="application/atom+xml">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: true,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="å†™ä½œèƒŒæ™¯ç¬”è€…æ‰€åœ¨é¡¹ç›®ä½¿ç”¨çš„å‰ç«¯æŠ€æœ¯æ¯”è¾ƒè€æ—§ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦å…ˆå¯åŠ¨ä¸€ä¸ªåç«¯é¡¹ç›® (tomcat + mysql + redis) æ¥åšä¸ºé™æ€æœåŠ¡å™¨ç„¶åä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…¬å¸å†…éƒ¨çš„ç±»AMDæ¨¡å—åŠ è½½å·¥å…·ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½è¦åŠ è½½1000+ çš„æ–‡ä»¶ï¼Œé¡µé¢çš„å“åº”æ—¶é—´æ¥è¿‘20sï¼Œ å¯¼è‡´å¼€å‘çš„è¿‡ç¨‹éå¸¸ç—›è‹¦æ‰€ä»¥å†³å®šä½¿ç”¨ HTTP/2 æ¥å¼€å‘ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æ¥åŠ å¿«é¡µé¢çš„åŠ è½½é€Ÿåº¦. ç›®å‰æ¥è¯´æ•ˆæœä¸é”™ï¼Œç›¸å¯¹äº HTTP1.1">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨ HTTP2 åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)">
<meta property="og:url" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)/index.html">
<meta property="og:site_name" content="Lleo">
<meta property="og:description" content="å†™ä½œèƒŒæ™¯ç¬”è€…æ‰€åœ¨é¡¹ç›®ä½¿ç”¨çš„å‰ç«¯æŠ€æœ¯æ¯”è¾ƒè€æ—§ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦å…ˆå¯åŠ¨ä¸€ä¸ªåç«¯é¡¹ç›® (tomcat + mysql + redis) æ¥åšä¸ºé™æ€æœåŠ¡å™¨ç„¶åä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…¬å¸å†…éƒ¨çš„ç±»AMDæ¨¡å—åŠ è½½å·¥å…·ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½è¦åŠ è½½1000+ çš„æ–‡ä»¶ï¼Œé¡µé¢çš„å“åº”æ—¶é—´æ¥è¿‘20sï¼Œ å¯¼è‡´å¼€å‘çš„è¿‡ç¨‹éå¸¸ç—›è‹¦æ‰€ä»¥å†³å®šä½¿ç”¨ HTTP/2 æ¥å¼€å‘ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æ¥åŠ å¿«é¡µé¢çš„åŠ è½½é€Ÿåº¦. ç›®å‰æ¥è¯´æ•ˆæœä¸é”™ï¼Œç›¸å¯¹äº HTTP1.1">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨%20(ä¸Š)/http2-1.png">
<meta property="og:image" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨%20(ä¸Š)/http2-2.png">
<meta property="og:image" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨%20(ä¸Š)/http-3.png">
<meta property="og:image" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨%20(ä¸Š)/http2-4.png">
<meta property="og:image" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨%20(ä¸Š)/http2-6.png">
<meta property="og:updated_time" content="2020-11-24T06:07:16.912Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä½¿ç”¨ HTTP2 åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)">
<meta name="twitter:description" content="å†™ä½œèƒŒæ™¯ç¬”è€…æ‰€åœ¨é¡¹ç›®ä½¿ç”¨çš„å‰ç«¯æŠ€æœ¯æ¯”è¾ƒè€æ—§ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦å…ˆå¯åŠ¨ä¸€ä¸ªåç«¯é¡¹ç›® (tomcat + mysql + redis) æ¥åšä¸ºé™æ€æœåŠ¡å™¨ç„¶åä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…¬å¸å†…éƒ¨çš„ç±»AMDæ¨¡å—åŠ è½½å·¥å…·ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½è¦åŠ è½½1000+ çš„æ–‡ä»¶ï¼Œé¡µé¢çš„å“åº”æ—¶é—´æ¥è¿‘20sï¼Œ å¯¼è‡´å¼€å‘çš„è¿‡ç¨‹éå¸¸ç—›è‹¦æ‰€ä»¥å†³å®šä½¿ç”¨ HTTP/2 æ¥å¼€å‘ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æ¥åŠ å¿«é¡µé¢çš„åŠ è½½é€Ÿåº¦. ç›®å‰æ¥è¯´æ•ˆæœä¸é”™ï¼Œç›¸å¯¹äº HTTP1.1">
<meta name="twitter:image" content="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨%20(ä¸Š)/http2-1.png">
  <link rel="canonical" href="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>ä½¿ç”¨ HTTP2 åšå¼€å‘æœåŠ¡å™¨ (ä¸Š) | Lleo</title>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90225642-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-90225642-1');
    }
  </script>








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lleo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">Lleohao`s blog</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lleo hao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lleo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">ä½¿ç”¨ HTTP2 åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)

          
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-03-27 09:50:00" itemprop="dateCreated datePublished" datetime="2018-03-27T09:50:00+08:00">2018-03-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-11-24 14:07:16" itemprop="dateModified" datetime="2020-11-24T14:07:16+08:00">2020-11-24</time>
              </span>
            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="å†™ä½œèƒŒæ™¯"><a href="#å†™ä½œèƒŒæ™¯" class="headerlink" title="å†™ä½œèƒŒæ™¯"></a>å†™ä½œèƒŒæ™¯</h2><p>ç¬”è€…æ‰€åœ¨é¡¹ç›®ä½¿ç”¨çš„å‰ç«¯æŠ€æœ¯æ¯”è¾ƒè€æ—§ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦å…ˆå¯åŠ¨ä¸€ä¸ªåç«¯é¡¹ç›® (tomcat + mysql + redis) æ¥åšä¸ºé™æ€æœåŠ¡å™¨</p><p>ç„¶åä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…¬å¸å†…éƒ¨çš„ç±»AMDæ¨¡å—åŠ è½½å·¥å…·ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½è¦åŠ è½½1000+ çš„æ–‡ä»¶ï¼Œé¡µé¢çš„å“åº”æ—¶é—´æ¥è¿‘20sï¼Œ å¯¼è‡´å¼€å‘çš„è¿‡ç¨‹éå¸¸ç—›è‹¦</p><p>æ‰€ä»¥å†³å®šä½¿ç”¨ HTTP/2 æ¥å¼€å‘ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æ¥åŠ å¿«é¡µé¢çš„åŠ è½½é€Ÿåº¦. ç›®å‰æ¥è¯´æ•ˆæœä¸é”™ï¼Œç›¸å¯¹äº HTTP1.1 æ¥è¯´åŠ è½½<strong>é€Ÿåº¦æå‡äº† 50%</strong>ã€‚</p><p>å¯¹äºå¼€å‘ç¯å¢ƒä¸æˆ‘ä»¬ç±»ä¼¼çš„é¡¹ç›®ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹ã€‚</p><h2 id="ç†è®ºåŸºç¡€"><a href="#ç†è®ºåŸºç¡€" class="headerlink" title="ç†è®ºåŸºç¡€"></a>ç†è®ºåŸºç¡€</h2><h3 id="1-HTTP-2-çš„TCPè¿æ¥å¤ç”¨"><a href="#1-HTTP-2-çš„TCPè¿æ¥å¤ç”¨" class="headerlink" title="1. HTTP/2 çš„TCPè¿æ¥å¤ç”¨"></a>1. HTTP/2 çš„TCPè¿æ¥å¤ç”¨</h3><p>è™½ç„¶æˆ‘ä»¬å¼€å‘çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯æœ¬åœ°æœåŠ¡å™¨ï¼Œå»ºç«‹è¿æ¥çš„é€Ÿåº¦å’Œä¸‹è½½é€Ÿåº¦éƒ½å¾ˆå¿«ï¼Œä½†æ˜¯æµè§ˆå™¨é’ˆå¯¹åŒä¸€åŸŸåçš„å¹¶å‘è¯·æ±‚æ˜¯æœ‰ä¸Šé™çš„ã€‚</p><a id="more"></a>




<p>å½“æ‰€éœ€è¦çš„æ–‡ä»¶æ•°é‡å¾ˆå¤šæ—¶ï¼Œæˆ‘ä»¬æ¯æ¬¡åªèƒ½è¯·æ±‚ä¸€å®šæ•°é‡çš„æ–‡ä»¶ï¼Œå½“å‰é¢çš„æ–‡ä»¶çš„è¯·æ±‚å®Œæˆåæ‰èƒ½å»è¯·æ±‚ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™å°±é€ æˆäº†å µå¡ã€‚</p>
<p><img src="./http2-1.png" alt></p>
<p><em>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜æ˜¾çš„é“¾æ¥é™åˆ¶å’Œå µå¡</em></p>
<p>è€Œ HTTP/2 å¯ä»¥åœ¨åŒä¸€è¿æ¥ä¸Šè¿›è¡Œå¤šä¸ªå¹¶å‘äº¤æ¢ï¼Œå¯ä»¥é¿å…å‡ºç°å› ä¸ºæµè§ˆå™¨çš„å¹¶å‘é™åˆ¶è€Œé€ æˆçš„å µå¡</p>
<blockquote>
<p>HTTP/2 é€šè¿‡æ”¯æŒæ ‡å¤´å­—æ®µå‹ç¼©å’Œåœ¨åŒä¸€è¿æ¥ä¸Šè¿›è¡Œå¤šä¸ªå¹¶å‘äº¤æ¢ï¼Œè®©åº”ç”¨æ›´æœ‰æ•ˆåœ°åˆ©ç”¨ç½‘ç»œèµ„æºï¼Œå‡å°‘æ„ŸçŸ¥çš„å»¶è¿Ÿæ—¶é—´ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå¯ä»¥å¯¹åŒä¸€è¿æ¥ä¸Šçš„è¯·æ±‚å’Œå“åº”æ¶ˆæ¯è¿›è¡Œäº¤é”™å‘é€å¹¶ä¸º HTTP æ ‡å¤´å­—æ®µä½¿ç”¨æœ‰æ•ˆç¼–ç ã€‚ HTTP/2 è¿˜å…è®¸ä¸ºè¯·æ±‚è®¾ç½®ä¼˜å…ˆçº§ï¼Œè®©æ›´é‡è¦çš„è¯·æ±‚æ›´å¿«é€Ÿåœ°å®Œæˆï¼Œä»è€Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚å‡ºå°çš„åè®®å¯¹ç½‘ç»œæ›´åŠ å‹å¥½ï¼Œå› ä¸ºä¸ HTTP/1.x ç›¸æ¯”ï¼Œå¯ä»¥ä½¿ç”¨æ›´å°‘çš„ TCP è¿æ¥ã€‚ è¿™æ„å‘³ç€ä¸å…¶ä»–æµçš„ç«äº‰å‡å°ï¼Œå¹¶ä¸”è¿æ¥çš„æŒç»­æ—¶é—´å˜é•¿ï¼Œè¿™äº›ç‰¹æ€§åè¿‡æ¥æé«˜äº†å¯ç”¨ç½‘ç»œå®¹é‡çš„åˆ©ç”¨ç‡ã€‚ æœ€åï¼ŒHTTP/2 è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨äºŒè¿›åˆ¶æ¶ˆæ¯åˆ†å¸§å¯¹æ¶ˆæ¯è¿›è¡Œæ›´é«˜æ•ˆçš„å¤„ç†ã€‚ï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ç‰ˆæœ¬ 2ï¼Œè‰æ¡ˆ 17ï¼‰ - <a href="https://developers.google.com/web/fundamentals/performance/http2/?hl=zh-cn" target="_blank" rel="noopener">https://developers.google.com/web/fundamentals/performance/http2/?hl=zh-cn</a></p>
</blockquote>
<h3 id="2-Server-Push-æœåŠ¡å™¨æ¨é€"><a href="#2-Server-Push-æœåŠ¡å™¨æ¨é€" class="headerlink" title="2. Server Push æœåŠ¡å™¨æ¨é€"></a>2. Server Push æœåŠ¡å™¨æ¨é€</h3><p>HTTP/2 ä¸­æœ€ä»¤äººæœŸå¾…çš„ç‰¹æ€§å°±æ˜¯ Sever Push (æœåŠ¡å™¨æ¨é€)ã€‚</p>
<p>é€šè¿‡ Server Pushï¼ŒæœåŠ¡å™¨å¯ä»¥å¯¹æµè§ˆå™¨çš„<strong>å•ä¸ªè¯·æ±‚è¿”å›å¤šä¸ªå“åº”</strong>ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æµè§ˆå™¨å‘å‡ºè¯·æ±‚å†ç»™å»å“åº”ã€‚</p>
<p>ç®€å•ä¸¾ä¸ªğŸŒ°</p>
<ol>
<li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ a.com è¯·æ±‚</li>
<li>æœåŠ¡å™¨ç¡®å®šè¿™ä¸ªè¯·æ±‚è¿”å›ä¸€ä¸ª index.html æ–‡ä»¶ï¼ŒåŒæ—¶å‘ç°è¿™ä¸ªæ–‡ä»¶éœ€è¦ style.css å’Œ script.js æ–‡ä»¶</li>
<li>æœåŠ¡å™¨å‘æµè§ˆå™¨æ”¾å›  index.html çš„å“åº”ï¼ŒåŒæ—¶å‘Šè¯‰æµè§ˆå™¨æˆ‘è¿™é‡Œæœ‰ style.css å’Œ script.js æ–‡ä»¶ä½ å¯èƒ½éœ€è¦</li>
<li>æµè§ˆå™¨æ”¶åˆ° index.html åï¼Œè§£æåå‘ç°éœ€è¦ style.css å’Œ script.jsï¼Œæ­£å¥½æœåŠ¡å™¨ç«¯è¯´å¯ä»¥æ¨é€è¿™ä¸¤ä¸ªèµ„æºï¼Œæµè§ˆå™¨å°±ä¸éœ€è¦å†æ¬¡å‘é€è¯·æ±‚å»è·å–ï¼Œè€Œæ˜¯ç›´æ¥å°±æ”¶æœåŠ¡å™¨çš„æ¨é€</li>
</ol>
<p>ç»“åˆä¸Šé¢çš„è¿æ¥å¤ç”¨ï¼ŒHTTP/2 å¯ä»¥æå¤§çš„åŠ å¿«èµ„æºæ–‡ä»¶çš„åŠ è½½é€Ÿåº¦</p>
<p><img src="./http2-2.png" alt></p>
<p><em>å¯ä»¥çœ‹åˆ°æµè§ˆå™¨ä½¿ç”¨ä¸€ä¸ªé“¾æ¥åŠ è½½å®Œäº†æ‰€æœ‰çš„èµ„æºæ–‡ä»¶</em></p>
<h2 id="Nodejs-HTTP-2-æ¨¡å—ç®€å•ä½¿ç”¨"><a href="#Nodejs-HTTP-2-æ¨¡å—ç®€å•ä½¿ç”¨" class="headerlink" title="Nodejs HTTP/2 æ¨¡å—ç®€å•ä½¿ç”¨"></a>Nodejs HTTP/2 æ¨¡å—ç®€å•ä½¿ç”¨</h2><blockquote>
<p>è¿™é‡Œå…ˆç®€å•ä»‹ç»ä¸‹ Node ä¸­ HTTP/2 çš„ä½¿ç”¨ï¼Œä¸‹ç¯‡æ–‡ç« å°†è¯¦ç»†é˜è¿°å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¯ä»¥åº”ç”¨çš„ HTTP/2 å¼€å‘æœåŠ¡å™¨</p>
</blockquote>
<h3 id="1-åˆ›å»º-HTTPS-è¯ä¹¦"><a href="#1-åˆ›å»º-HTTPS-è¯ä¹¦" class="headerlink" title="1. åˆ›å»º HTTPS è¯ä¹¦"></a>1. åˆ›å»º HTTPS è¯ä¹¦</h3><p>ç”±äº HTTP/2 éœ€è¦ä½¿ç”¨ HTTPSï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å…ˆç”Ÿæˆä¸€ä¸ªè¯ä¹¦ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -newkey rsa:2048 -nodes -sha256 -subj '/CN=localhost' \</span><br><span class="line">  -keyout localhost-privkey.pem -out localhost-cert.pem</span><br></pre></td></tr></table></figure>

<h3 id="2-é¡¹ç›®ç»“æ„"><a href="#2-é¡¹ç›®ç»“æ„" class="headerlink" title="2. é¡¹ç›®ç»“æ„"></a>2. é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ certificate</span><br><span class="line">â”‚   â”œâ”€â”€ localhost-cert.pem</span><br><span class="line">â”‚   â””â”€â”€ localhost-privkey.pem</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â””â”€â”€ app.js</span><br><span class="line">â””â”€â”€ www</span><br><span class="line">    â”œâ”€â”€ index.html</span><br><span class="line">    â”œâ”€â”€ script.js</span><br><span class="line">    â””â”€â”€ styles.css</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- www/index.html --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTTP2 demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"styles.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"script.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// www/script.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> content = <span class="built_in">document</span>.querySelector(<span class="string">"#content"</span>);</span><br><span class="line"></span><br><span class="line">content.innerHTML = <span class="string">`&lt;h1&gt;Hello HTTP/2&lt;/h1&gt;`</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* www/styles.css */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: cornflowerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¦‚ä¸Šçš„é¡¹ç›®ç»“æ„</p>
<h2 id="3-åˆ›å»ºæœåŠ¡å™¨"><a href="#3-åˆ›å»ºæœåŠ¡å™¨" class="headerlink" title="3. åˆ›å»ºæœåŠ¡å™¨"></a>3. åˆ›å»ºæœåŠ¡å™¨</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http2 = <span class="built_in">require</span>(<span class="string">"http2"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http2.createSecureServer(&#123;</span><br><span class="line">  key: fs.readFileSync(</span><br><span class="line">    path.resolve(__dirname, <span class="string">"../certificate/localhost-privkey.pem"</span>)</span><br><span class="line">  ),</span><br><span class="line">  cert: fs.readFileSync(</span><br><span class="line">    path.resolve(__dirname, <span class="string">"../certificate/localhost-cert.pem"</span>)</span><br><span class="line">  )</span><br><span class="line">&#125;);</span><br><span class="line">server.on(<span class="string">"error"</span>, err =&gt; <span class="built_in">console</span>.error(err));</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">"stream"</span>, (stream, headers) =&gt; &#123;</span><br><span class="line">  <span class="comment">// stream is a Duplex</span></span><br><span class="line">  stream.respond(&#123;</span><br><span class="line">    <span class="string">"content-type"</span>: <span class="string">"text/html"</span>,</span><br><span class="line">    <span class="string">":status"</span>: <span class="number">200</span></span><br><span class="line">  &#125;);</span><br><span class="line">  stream.end(<span class="string">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8443</span>);</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€æ§åˆ¶å°ï¼Œè¿›å…¥ Network ï¼Œå¼€å¯ Protocol æ˜¾ç¤º</p>
<p><img src="./http-3.png" alt></p>
<p>è®¿é—® <a href="https://localhost:8443/" target="_blank" rel="noopener">https://localhost:8443/</a> ï¼Œå³å¯çœ‹åˆ°åè®®å˜ä¸º <code>h2</code></p>
<p><img src="./http2-4.png" alt></p>
<h3 id="4-å¯ç”¨æœåŠ¡å™¨ç«¯æ¨é€"><a href="#4-å¯ç”¨æœåŠ¡å™¨ç«¯æ¨é€" class="headerlink" title="4. å¯ç”¨æœåŠ¡å™¨ç«¯æ¨é€"></a>4. å¯ç”¨æœåŠ¡å™¨ç«¯æ¨é€</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http2 = <span class="built_in">require</span>(<span class="string">"http2"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pemPath = path.resolve(__dirname, <span class="string">"../certificate/localhost-privkey.pem"</span>);</span><br><span class="line"><span class="keyword">const</span> certPaht = path.resolve(__dirname, <span class="string">"../certificate/localhost-cert.pem"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å– HTTP2 header å¸¸é‡</span></span><br><span class="line"><span class="keyword">const</span> &#123; HTTP2_HEADER_PATH, HTTP2_HEADER_STATUS &#125; = http2.constants;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é™æ€ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFileInfoMap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> fileInfoMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">const</span> fileList = fs.readdirSync(staticPath);</span><br><span class="line">  <span class="keyword">const</span> contentTypeMap = &#123;</span><br><span class="line">    js: <span class="string">"application/javascript"</span>,</span><br><span class="line">    css: <span class="string">"text/css"</span>,</span><br><span class="line">    html: <span class="string">"text/html"</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  fileList.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fd = fs.openSync(path.resolve(staticPath, file), <span class="string">"r"</span>);</span><br><span class="line">    <span class="keyword">const</span> contentType = contentTypeMap[file.split(<span class="string">"."</span>)[<span class="number">1</span>]];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> stat = fs.fstatSync(fd);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> headers = &#123;</span><br><span class="line">      <span class="string">"content-length"</span>: stat.size,</span><br><span class="line">      <span class="string">"last-modified"</span>: stat.mtime.toUTCString(),</span><br><span class="line">      <span class="string">"content-type"</span>: contentType</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    fileInfoMap.set(<span class="string">`/<span class="subst">$&#123;file&#125;</span>`</span>, &#123;</span><br><span class="line">      fd,</span><br><span class="line">      headers</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fileInfoMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é™æ€ç›®å½•</span></span><br><span class="line"><span class="keyword">const</span> staticPath = path.resolve(__dirname, <span class="string">"../www"</span>);</span><br><span class="line"><span class="keyword">const</span> fileInfoMap = createFileInfoMap();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ä¼ å…¥çš„æ–‡ä»¶æ¨é€åˆ°æµè§ˆå™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">stream, path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> file = fileInfoMap.get(path);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!file) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stream.pushStream(&#123; [HTTP2_HEADER_PATH]: path &#125;, (err, pushStream) =&gt; &#123;</span><br><span class="line">    pushStream.respondWithFD(file.fd, file.headers);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http2.createSecureServer(&#123;</span><br><span class="line">  key: fs.readFileSync(pemPath),</span><br><span class="line">  cert: fs.readFileSync(certPaht)</span><br><span class="line">&#125;);</span><br><span class="line">server.on(<span class="string">"error"</span>, err =&gt; <span class="built_in">console</span>.error(err));</span><br><span class="line"></span><br><span class="line">server.on(<span class="string">"stream"</span>, (stream, headers) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è·å–è¯·æ±‚è·¯å¾„</span></span><br><span class="line">  <span class="keyword">let</span> requestPath = headers[HTTP2_HEADER_PATH];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¯·æ±‚åˆ° '/' çš„è¯·æ±‚è¿”å› index.html</span></span><br><span class="line">  <span class="keyword">if</span> (requestPath === <span class="string">"/"</span>) &#123;</span><br><span class="line">    requestPath = <span class="string">"/index.html"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®è¯·æ±‚è·¯å¾„è·å–å¯¹åº”çš„æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">const</span> fileInfo = fileInfoMap.get(requestPath);</span><br><span class="line">  <span class="keyword">if</span> (!fileInfo) &#123;</span><br><span class="line">    stream.respond(&#123;</span><br><span class="line">      [HTTP2_HEADER_STATUS]: <span class="number">404</span></span><br><span class="line">    &#125;);</span><br><span class="line">    stream.end(<span class="string">"Not found"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¿é—®é¦–é¡µæ—¶åŒæ—¶æ¨é€å…¶ä»–æ–‡ä»¶èµ„æº</span></span><br><span class="line">  <span class="keyword">if</span> (requestPath === <span class="string">"/index.html"</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> fileInfoMap.keys()) &#123;</span><br><span class="line">      push(stream, key);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¨é€é¦–é¡µæ•°æ®</span></span><br><span class="line">  stream.respondWithFD(fileInfo.fd, &#123;</span><br><span class="line">    ...fileInfo.headers</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8443</span>);</span><br></pre></td></tr></table></figure>

<p>è®¿é—® <a href="https://localhost:8443" target="_blank" rel="noopener">https://localhost:8443</a> å°±å¯ä»¥çœ‹åˆ° styles.css å’Œ script.js æ˜¯é€šè¿‡ HTTP/2 æ¨é€è¿‡æ¥çš„</p>
<p><img src="./http2-6.png" alt></p>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ol>
<li><a href="https://developers.google.com/web/fundamentals/performance/http2/?hl=zh-cn#_4" target="_blank" rel="noopener">HTTP/2 ç®€ä»‹  |  Web  |  Google Developers</a></li>
<li><a href="http://www.alloyteam.com/2017/04/guide-http2-server-push-part1/" target="_blank" rel="noopener">HTTP/2 Server Push è¯¦è§£ï¼ˆä¸Šï¼‰ | AlloyTeam</a></li>
<li><a href="http://www.alloyteam.com/2017/04/guide-http2-server-push-part2/" target="_blank" rel="noopener">HTTP/2 Server Push è¯¦è§£ï¼ˆä¸‹ï¼‰ | AlloyTeam</a></li>
<li><a href="./node-http2-demo.zip">demo ä¸‹è½½åœ°å€</a></li>
</ol>

    </div>

    
    
    
        
      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Lleo hao</li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)/" title="ä½¿ç”¨ HTTP2 åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)">https://lleohao.github.io/2018/03/27/ä½¿ç”¨-HTTP2-åšå¼€å‘æœåŠ¡å™¨ (ä¸Š)/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li>
</ul>
</div>

      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2018/03/25/åœ¨-Heroku-ä¸Šå¼€å‘ã€éƒ¨ç½²Nodeç¨‹åºçš„å¿«é€ŸæŒ‡å—/" rel="next" title="åœ¨ Heroku ä¸Šå¼€å‘ã€éƒ¨ç½²Nodeç¨‹åºçš„å¿«é€ŸæŒ‡å—">
                  <i class="fa fa-chevron-left"></i> åœ¨ Heroku ä¸Šå¼€å‘ã€éƒ¨ç½²Nodeç¨‹åºçš„å¿«é€ŸæŒ‡å—
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2018/12/28/å‰ç«¯æ¡†æ¶ä¸­ â€œç±»mixinâ€ æ¨¡å¼çš„æ€è€ƒ /" rel="prev" title="å‰ç«¯æ¡†æ¶ä¸­ â€œç±»mixinâ€ æ¨¡å¼çš„æ€è€ƒ">
                  å‰ç«¯æ¡†æ¶ä¸­ â€œç±»mixinâ€ æ¨¡å¼çš„æ€è€ƒ <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#å†™ä½œèƒŒæ™¯"><span class="nav-number">1.</span> <span class="nav-text">å†™ä½œèƒŒæ™¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç†è®ºåŸºç¡€"><span class="nav-number">2.</span> <span class="nav-text">ç†è®ºåŸºç¡€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-HTTP-2-çš„TCPè¿æ¥å¤ç”¨"><span class="nav-number">2.1.</span> <span class="nav-text">1. HTTP/2 çš„TCPè¿æ¥å¤ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Server-Push-æœåŠ¡å™¨æ¨é€"><span class="nav-number">2.2.</span> <span class="nav-text">2. Server Push æœåŠ¡å™¨æ¨é€</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nodejs-HTTP-2-æ¨¡å—ç®€å•ä½¿ç”¨"><span class="nav-number">3.</span> <span class="nav-text">Nodejs HTTP/2 æ¨¡å—ç®€å•ä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-åˆ›å»º-HTTPS-è¯ä¹¦"><span class="nav-number">3.1.</span> <span class="nav-text">1. åˆ›å»º HTTPS è¯ä¹¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-é¡¹ç›®ç»“æ„"><span class="nav-number">3.2.</span> <span class="nav-text">2. é¡¹ç›®ç»“æ„</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-åˆ›å»ºæœåŠ¡å™¨"><span class="nav-number">4.</span> <span class="nav-text">3. åˆ›å»ºæœåŠ¡å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-å¯ç”¨æœåŠ¡å™¨ç«¯æ¨é€"><span class="nav-number">4.1.</span> <span class="nav-text">4. å¯ç”¨æœåŠ¡å™¨ç«¯æ¨é€</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç›¸å…³é“¾æ¥"><span class="nav-number">5.</span> <span class="nav-text">ç›¸å…³é“¾æ¥</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Lleo hao</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/lleohao" title="GitHub &rarr; https://github.com/lleohao" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://weibo.com/lleohao" title="Weibo &rarr; https://weibo.com/lleohao" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lleo hao</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/js/next-boot.js?v=7.4.0"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>





















  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '27b8feb4314727c2c88b',
      clientSecret: 'cfa3e7125bff541f2688c98ff4de36705671d972',
      repo: 'lleohao.github.io',
      owner: 'lleohao',
      admin: ['lleohao'],
      id: 'ddbbfd3f3a5b3036c3c48fc97f957b2a',
        language: 'zh-CN',
      
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
